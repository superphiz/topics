[A [hopefully] brief history of client diversity on the beacon chain](https://www.reddit.com/r/ethstaker/comments/sz5owa/a_hopefully_brief_history_of_client_diversity_on/)


I wanted to give a broad overview of client diversity on the beacon chain, both for my own record and to frame it within the larger picture of decentralization. I'm limited on time, so I'll probably skip attributions and links (but I may return to add them later). I'm not claiming any of this is accurate, it's just the perspective of a guy without much else to do.

To go WAAAAAY back, the Ethereum Foundation offered grants to client implementation teams several years ago. They had names like Status, Parity, Artemis, and Harmony. At one point I think there were twelve different client implementation teams, but by early 2020 that had narrowed down to about four: Nimbus, Lighthouse, Teku, and Prysm. Lodestar was also a contender, but they focused on tooling & libraries rather than being a user-ready staking client.

The design philosophy behind multiple independent clients is that we should develop a standardized protocol and implement it in several different programming languages, and if the protocol is well defined then the clients would interoperate seamlessly. This kind of "spec driven" design is a way of reducing individual client faults because a fault in any client would stand out clearly. On the contrary, a protocol with only one implementation has no cross check to ensure good implementation.

Around April 2020, Prysm began releasing public testnets like [topaz](https://poap.gallery/event/184) in which EthStaker held public launch calls and created training resources to help users onboard. Prysm was the most active discord and they created easy front end tooling so that anyone who wanted to join their testnet could. To say it plainly, Prysm was very popular with all users.

According to my POAP record, the Medalla testnet launched [August 4, 2020](https://poap.gallery/event/350). EthStaker recognized the need for client diversity at that time and /u/lamboshinakaghini and /u/butta_tribot worked together to create a graffiti scheme that would reward testnet participants with a POAP for trying each of the different clients. We recognized at that time that Prysm had significantly high market share, and we tried to influence that by encouraging users to try clients they hadn't ever used before. (To see this, go to https://poap.gallery and search for "Medalla"). I should briefly point out that a problem with Prysm's clock sync led to a [six day loss of finality](https://poap.gallery/event/366) that many of us regarded as a good stress test for the network and a real-life lesson of the need for client diversity.

Mainnet deposits opened in November 2020 and met the [threshold for mainnet launch on November 24, 2020](https://poap.gallery/event/661). The beacon chain [mainnet launch](https://poap.gallery/event/553) occurred on December 1, 2020. At the time, many people were desperate to stake, but it was seen as very difficult when compared to non-technical DPOS staking. DPOS staking is centralized by design, and that's a weakness that didn't fit into the decentralized ethos of Ethereum. EthStaker promoted solo-first staking and begged users to wait for trustless, open source, and decentralized staking solutions, but the first of this generation were still a year away. ([Rocket Pool](https://rocketpool.net) is currently the only trustless, decentralized, open source, and permissionless staking provider available and I am a very proud fan/user/supporter.)

Users did what any rational actor does, they went with the path of least resistance and highest gain, which turned out to be solutions like Coinbase, Kraken, and Lido. For their part, these three providers applied common sense and used the most popular staking client [~~(and the only one with a remote signer at the time)~~](https://nitter.net/benjaminion_xyz/status/1496376888792604673#m) and staked user funds on Prysm. While I did, and still do encourage users to stake in the most decentralized way they can, I recognize that the path of least resistance is often the winner, and so it was in this case. We must recognize that staking with centralized providers is contrary to the decentralized ethos of Ethereum, and doing so actively devalues the coins we hold.

Fast forward to 2021 and most stakers had settled into a groove. We could see from our best available metrics, tools like the [Miga Labs Crawler](https://migalabs.es/crawler/dashboard), that there were a disproportionately high number of nodes running prysm, but we had no real knowledge of how many validators each node was running. A node can run somewhere between 0 and several hundred thousand validators, so it was POSSIBLE that we had block proposal diversity even if we didn't have node diversity.

[Michael Sproul](https://twitter.com/sproulM_) from the Lighthouse team really helped us to get things moving. He realized that he could identify the block proposer client by fingerprinting the order that attestations were packed into block proposals and identify the proposing client with a high degree of certainty (this is now available as [blockprint](https://github.com/sigp/blockprint)). A few months later, I noticed that [Invisible Symbol](https://twitter.com/0xinvis) from the Rocket Pool #Trading discord was posting some really interesting operator data, specifically, he had data that linked many more validators to their operators than anyone else, notably, he had developed an accurate list of Coinbase's validators which had previously been hiding. 

With Michael and 0xInvis working together, we very quickly uncovered the first set of data for what became https://pools.invis.cloud around [February 13, 2022](https://twitter.com/0xinvis/status/1492936618449199109). When combined with [Joseph Cook's](https://twitter.com/tothepoles) incredible ability to explain complex concepts simply, pools.invis.cloud was ready to launch. After giving the pools a chance to respond but not hearing anything, we published the data showing that Coinbase and Kraken were the primary Prysm offenders. To be honest, this was a huge revelation for EthStaker because we had just spent the past year trying to get grandma to change her one Prysm validator thinking it would matter - when the two biggest providers were running a combined 78,000 Prysm validators.

It really only took pools.invis.cloud a week to do its work. I had accurate information that [I could share publicly](https://twitter.com/superphiz/status/1495397371466944523) to encourage pools to acknowledge our community and engage. [Kraken responded first](https://twitter.com/krakensupport/status/1495590333085798400) followed by [Coinbase](https://twitter.com/emiliemc/status/1496256781638840320). While the messages vary, they are an acknowledgement of the need for client diversity on the beacon chain.

That brings us to the present moment. The merge is about three months away (just a guess) and we have communications from the two biggest Prysm operators that they're willing to implement more minority client validators. I sincerely welcome their engagement and I'm glad to have them as participants in our community. But here's the thing - we can't stop pushing until client diversity ACTUALLY appears on the network. Even then, we have to keep pushing until no client has more than 50% of the validators. I know we've made a lot of progress, but we can't stop pushing until the job is done.

I know we're in the middle of this client diversity challenge, but I also want to look ahead and begin preparing for our next obstacle. I believe the next decentralization challenge we'll face is limiting operators to holding less than 20% of validators on the network. Right now Coinbase has about 16% of active validators, and I think we're going to want to come together as a community and say, "Thank you for providing this service, but you're becoming a risk to our decentralized network." This won't be an easy conversation, and it's not one large providers want to hear, but it's in all of our best interest.

I want to thank the EthStaker team as well as the broader community for their commitment to decentralizing the beacon chain. I appreciate that SO many people have stood with us to improve our community. Thank you.

That was really long, and I desperately need someone who is not me to develop a POAP to celebrate our current progress. <3
